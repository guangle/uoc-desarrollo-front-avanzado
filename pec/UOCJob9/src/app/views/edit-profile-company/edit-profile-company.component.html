<div class="container">
  <app-navbar title="Edición del perfil de la empresa"></app-navbar>

  <div class="row" style="margin-top: 30px;">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header">
          <i class="material-icons">business</i>
        </div>
        <div class="card-content">
          <h4 class="card-title">
            Editar perfil
          </h4>

          <div class="row">
            <div class="col-md-12">
              <div class="col-md-2">
                <img
                  src="assets/img/logo_empresa.png"
                  alt="Empresa logo"
                  height="100%"
                  width="100%"
                />
              </div>
              <div class="col-md-10">
                <form
                  [formGroup]="editProfileCompanyForm"
                  (ngSubmit)="editProfileCompany()"
                >
                  <!--Nombre-->
                  <div class="row">
                    <div class="col-md-4">
                      <mat-form-field color="accent">
                        <input
                          matInput
                          type="text"
                          placeholder="Nombre comercial"
                          formControlName="nombre_comercial"
                        />
                        <mat-error
                          *ngIf="
                            nombre_comercial.invalid &&
                            nombre_comercial.errors != null &&
                            nombre_comercial.errors.required
                          "
                        >
                          El nombre comercial es obligatorio
                        </mat-error>

                        <mat-error
                          *ngIf="
                            nombre_comercial.invalid &&
                            nombre_comercial.errors != null &&
                            nombre_comercial.errors.minlength
                          "
                        >
                          El nombre comercial debe tener al menos 3 caracteres
                        </mat-error>

                        <mat-error
                          *ngIf="
                            nombre_comercial.invalid &&
                            nombre_comercial.errors != null &&
                            nombre_comercial.errors.maxlength
                          "
                        >
                          El nombre comercial no puede tener mas de 255
                          caracteres
                        </mat-error>

                        <mat-error
                          *ngIf="
                            nombre_comercial.invalid &&
                            nombre_comercial.errors != null &&
                            nombre_comercial.errors.espacio
                          "
                        >
                          El nombre comercial no puede empezar o terminar con un
                          espacio en blanco
                        </mat-error>
                      </mat-form-field>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-md-4">
                      <mat-form-field color="accent">
                        <input
                          matInput
                          type="text"
                          placeholder="Razón social"
                          formControlName="razon_social"
                        />
                        <mat-error
                          *ngIf="
                            razon_social.invalid &&
                            razon_social.errors != null &&
                            razon_social.errors.required
                          "
                        >
                          La razón social es obligatoria
                        </mat-error>

                        <mat-error
                          *ngIf="
                            razon_social.invalid &&
                            razon_social.errors != null &&
                            razon_social.errors.minlength
                          "
                        >
                          La razón social debe tener al menos 3 caracteres
                        </mat-error>

                        <mat-error
                          *ngIf="
                            razon_social.invalid &&
                            razon_social.errors != null &&
                            razon_social.errors.maxlength
                          "
                        >
                          La razón social no puede tener mas de 255 caracteres
                        </mat-error>

                        <mat-error
                          *ngIf="
                            razon_social.invalid &&
                            razon_social.errors != null &&
                            razon_social.errors.espacio
                          "
                        >
                          La razón social no puede empezar o terminar con un
                          espacio en blanco
                        </mat-error>
                      </mat-form-field>
                    </div>
                  </div>

                  <!--Cif-->
                  <div class="row">
                    <div class="col-md-4">
                      <mat-form-field color="accent">
                        <input
                          matInput
                          type="text"
                          placeholder="CIF"
                          formControlName="cif"
                        />
                      </mat-form-field>
                    </div>
                  </div>
                  <!-- Direccion -->
                  <div class="row">
                    <div class="col-md-4">
                      <mat-form-field color="accent">
                        <input
                          matInput
                          type="text"
                          placeholder="Dirección"
                          formControlName="direccion"
                        />
                        <mat-error
                          *ngIf="
                            direccion.invalid &&
                            direccion.errors != null &&
                            direccion.errors.required
                          "
                        >
                          La dirección es obligatoria
                        </mat-error>
                      </mat-form-field>
                    </div>
                  </div>
                  <!-- provincia y municipio -->
                  <div class="row">
                    <div class="col-md-4">
                      <mat-form-field color="accent">
                        <mat-label>Provincia</mat-label>
                        <mat-select
                          placeholder="Provincia"
                          (selectionChange)="changeProvincia($event)"
                          formControlName="provincia"
                        >
                          <mat-option>
                            Seleccione provincia..
                          </mat-option>

                          <mat-option
                            *ngFor="let p of provincias"
                            [value]="p.uid"
                          >
                            {{ p.name }}
                          </mat-option>
                        </mat-select>
                        <mat-error
                          *ngIf="
                            provincia.invalid &&
                            provincia.errors != null &&
                            provincia.errors.required
                          "
                        >
                          La provincia es obligatoria
                        </mat-error>
                      </mat-form-field>
                    </div>
                    <div class="col-md-4">
                      <mat-form-field color="accent">
                        <mat-label>Municipio</mat-label>
                        <mat-select
                          formControlName="municipio"
                          placeholder="Municipio"
                        >
                          <mat-option>
                            Seleccione municipio..
                          </mat-option>

                          <mat-option
                            *ngFor="let m of municipios"
                            [value]="m.uid"
                          >
                            {{ m.name }}
                          </mat-option>
                        </mat-select>
                        <mat-error
                          *ngIf="
                            municipio.invalid &&
                            municipio.errors != null &&
                            municipio.errors.required
                          "
                        >
                          El municipio es obligatorio
                        </mat-error>
                      </mat-form-field>
                    </div>
                  </div>
                  <!--url-->
                  <div class="row">
                    <div class="col-md-4">
                      <mat-form-field color="accent">
                        <input
                          matInput
                          type="text"
                          placeholder="Url"
                          formControlName="url"
                        />
                        <mat-error
                          *ngIf="
                            url.invalid &&
                            url.errors != null &&
                            url.errors.required
                          "
                        >
                          La url es obligatoria
                        </mat-error>
                        <mat-error
                          *ngIf="
                            url.invalid &&
                            url.errors != null &&
                            url.errors.pattern
                          "
                        >
                          La url no es correcta
                        </mat-error>
                      </mat-form-field>
                    </div>
                  </div>
                  <!--persona de contacto-->
                  <div class="row">
                    <div class="col-md-4">
                      <mat-form-field color="accent">
                        <input
                          matInput
                          type="text"
                          placeholder="Persona de contacto"
                          formControlName="contacto_nombre"
                        />
                        <mat-error
                          *ngIf="
                            contacto_nombre.invalid &&
                            contacto_nombre.errors != null &&
                            contacto_nombre.errors.required
                          "
                        >
                          El nombre es obligatorio
                        </mat-error>

                        <mat-error
                          *ngIf="
                            contacto_nombre.invalid &&
                            contacto_nombre.errors != null &&
                            contacto_nombre.errors.minlength
                          "
                        >
                          El nombre debe tener al menos 3 caracteres
                        </mat-error>

                        <mat-error
                          *ngIf="
                            contacto_nombre.invalid &&
                            contacto_nombre.errors != null &&
                            contacto_nombre.errors.maxlength
                          "
                        >
                          El nombre no puede tener mas de 255 caracteres
                        </mat-error>

                        <mat-error
                          *ngIf="
                            contacto_nombre.invalid &&
                            contacto_nombre.errors != null &&
                            contacto_nombre.errors.espacio
                          "
                        >
                          El nombre no puede empezar o terminar con un espacio
                          en blanco
                        </mat-error>
                      </mat-form-field>
                    </div>
                  </div>
                  <!--telefono-->
                  <div class="row">
                    <div class="col-md-4">
                      <mat-form-field color="accent">
                        <input
                          matInput
                          type="text"
                          placeholder="Teléfono"
                          formControlName="contacto_telefono"
                        />
                        <mat-error
                          *ngIf="
                            contacto_telefono.invalid &&
                            contacto_telefono.errors != null &&
                            contacto_telefono.errors.required
                          "
                        >
                          El teléfono es obligatorio
                        </mat-error>
                      </mat-form-field>
                    </div>
                  </div>
                  <!--email-->
                  <div class="row">
                    <div class="col-md-4">
                      <mat-form-field color="accent">
                        <input
                          matInput
                          type="text"
                          placeholder="Email"
                          formControlName="contacto_mail"
                        />
                        <mat-error
                          *ngIf="
                            contacto_mail.invalid &&
                            contacto_mail.errors != null &&
                            contacto_mail.errors.required
                          "
                        >
                          El email es obligatorio
                        </mat-error>
                        <mat-error
                          *ngIf="
                            contacto_mail.invalid &&
                            contacto_mail.errors != null &&
                            contacto_mail.errors.email
                          "
                        >
                          El email no tiene un formato válido
                        </mat-error>
                      </mat-form-field>
                    </div>
                  </div>
                </form>
              </div>

              <div>PENDIENTE SUBMIT</div>

              <div class="contenedor">
                <div id="contenidoFormulario">
                  <div id="colFoto">
                    <img
                      src="assets/logo_empresa.png"
                      alt="Empresa logo"
                      height="150px"
                      width="150px"
                      onclick="alert('Subir documento - pendiente');"
                    />
                    <span id="profile_name">
                      {{ (currentCompany$ | async)?.nombre_comercial }}</span
                    >
                  </div>

                  <div id="colDatos">
                    <form
                      [formGroup]="editProfileCompanyForm"
                      (ngSubmit)="editProfileCompany()"
                    >
                      <div class="fila-form">
                        <label for="address">Nombre comercial: </label>
                        <input
                          type="text"
                          size="80"
                          formControlName="nombre_comercial"
                        />
                      </div>
                      <div
                        class="fila-form validaciones"
                        *ngIf="editProfileCompanyForm.dirty"
                      >
                        <div
                          *ngIf="
                            nombre_comercial.errors != null &&
                            nombre_comercial.errors.required
                          "
                        >
                          El nombre comercial es obligatorio
                        </div>
                        <div
                          *ngIf="
                            nombre_comercial.errors != null &&
                            nombre_comercial.errors.minlength
                          "
                        >
                          El nombre debe tener al menos 3 caracteres
                        </div>
                        <div
                          *ngIf="
                            nombre_comercial.errors != null &&
                            nombre_comercial.errors.maxlength
                          "
                        >
                          El nombre no puede tener mas de 255 caracteres
                        </div>
                        <div
                          *ngIf="
                            nombre_comercial.errors != null &&
                            nombre_comercial.errors.espacio
                          "
                        >
                          El nombre no puede empezar o terminar con un espacio
                          en blanco
                        </div>
                      </div>

                      <div class="fila-form">
                        <label for="razon_social">Razón social: </label>
                        <input
                          type="text"
                          size="80"
                          formControlName="razon_social"
                        />
                      </div>
                      <div
                        class="fila-form validaciones"
                        *ngIf="editProfileCompanyForm.dirty"
                      >
                        <div
                          *ngIf="
                            razon_social.errors != null &&
                            razon_social.errors.required
                          "
                        >
                          La razón social es obligatoria
                        </div>
                        <div
                          *ngIf="
                            razon_social.errors != null &&
                            razon_social.errors.minlength
                          "
                        >
                          La razón social debe tener al menos 3 caracteres
                        </div>
                        <div
                          *ngIf="
                            razon_social.errors != null &&
                            razon_social.errors.maxlength
                          "
                        >
                          La razón social no puede tener mas de 255 caracteres
                        </div>
                        <div
                          *ngIf="
                            razon_social.errors != null &&
                            razon_social.errors.espacio
                          "
                        >
                          La razón social no puede empezar o terminar con un
                          espacio en blanco
                        </div>
                      </div>

                      <div class="fila-form">
                        <div class="fila-form-col">
                          <label for="cif">CIF</label>
                          <input type="text" formControlName="cif" />
                        </div>
                      </div>

                      <div class="fila-form">
                        <label for="direccion">Dirección: </label>
                        <input
                          type="text"
                          size="50"
                          formControlName="direccion"
                        />
                      </div>
                      <div
                        class="fila-form validaciones"
                        *ngIf="editProfileCompanyForm.dirty"
                      >
                        <div
                          *ngIf="
                            direccion.errors != null &&
                            direccion.errors.required
                          "
                        >
                          La dirección es obligatoria
                        </div>
                      </div>

                      <div class="fila-form">
                        <div class="fila-form-col">
                          <label for="provincia">Provincia:</label>
                          <select
                            (change)="changeProvincia($event)"
                            formControlName="provincia"
                          >
                            <option value="">Seleccione provincia..</option>
                            <option
                              *ngFor="let p of provincias"
                              [ngValue]="p.uid"
                            >
                              {{ p.name }}
                            </option>
                          </select>
                        </div>
                        <div class="fila-form-col">
                          <label for="municipio">Municipio:</label>
                          <select formControlName="municipio">
                            <option value="">Seleccione municipio..</option>
                            <option
                              *ngFor="let m of municipios"
                              [ngValue]="m.uid"
                              >{{ m.name }}</option
                            >
                          </select>
                        </div>
                      </div>

                      <div
                        class="fila-form validaciones"
                        *ngIf="editProfileCompanyForm.dirty"
                      >
                        <div class="fila-form-col">
                          <div
                            *ngIf="
                              provincia.errors != null &&
                              provincia.errors.required
                            "
                          >
                            La provincia es obligatoria
                          </div>
                        </div>
                        <div class="fila-form-col">
                          <div
                            *ngIf="
                              municipio.errors != null &&
                              municipio.errors.required
                            "
                          >
                            El municipio es obligatorio
                          </div>
                        </div>
                      </div>

                      <div class="fila-form">
                        <label for="url">Url: </label>
                        <input type="text" size="80" formControlName="url" />
                      </div>
                      <div
                        class="fila-form validaciones"
                        *ngIf="editProfileCompanyForm.dirty"
                      >
                        <div *ngIf="url.errors != null && url.errors.required">
                          La url es obligatoria
                        </div>
                        <div *ngIf="url.errors != null && url.errors.pattern">
                          La url no es correcta
                        </div>
                      </div>

                      <div class="fila-form">
                        <label for="contacto_nombre"
                          >Nombre de la persona de contacto:
                        </label>
                        <input
                          type="text"
                          size="80"
                          formControlName="contacto_nombre"
                        />
                      </div>
                      <div
                        class="fila-form validaciones"
                        *ngIf="editProfileCompanyForm.dirty"
                      >
                        <div
                          *ngIf="
                            contacto_nombre.errors != null &&
                            contacto_nombre.errors.required
                          "
                        >
                          El nombre de la persona de contacto es obligatoria
                        </div>
                        <div
                          *ngIf="
                            contacto_nombre.errors != null &&
                            contacto_nombre.errors.minlength
                          "
                        >
                          El nombre debe tener al menos 3 caracteres
                        </div>
                        <div
                          *ngIf="
                            contacto_nombre.errors != null &&
                            contacto_nombre.errors.maxlength
                          "
                        >
                          El nombre no puede tener mas de 255 caracteres
                        </div>
                        <div
                          *ngIf="
                            contacto_nombre.errors != null &&
                            contacto_nombre.errors.espacio
                          "
                        >
                          El nombre no puede empezar o terminar con un espacio
                          en blanco
                        </div>
                      </div>

                      <div class="fila-form">
                        <label for="contacto_telefono"
                          >Teléfono de contacto:
                        </label>
                        <input
                          type="text"
                          size="80"
                          formControlName="contacto_telefono"
                        />
                      </div>
                      <div
                        class="fila-form validaciones"
                        *ngIf="editProfileCompanyForm.dirty"
                      >
                        <div
                          *ngIf="
                            contacto_telefono.errors != null &&
                            contacto_telefono.errors.required
                          "
                        >
                          El teléfono de contacto es obligatorio
                        </div>
                      </div>

                      <div class="fila-form">
                        <label for="contacto_mail">Email de contacto: </label>
                        <input
                          type="text"
                          size="80"
                          formControlName="contacto_mail"
                        />
                      </div>
                      <div
                        class="fila-form validaciones"
                        *ngIf="editProfileCompanyForm.dirty"
                      >
                        <div
                          *ngIf="
                            contacto_mail.errors != null &&
                            contacto_mail.errors.required
                          "
                        >
                          El email de contacto es obligatorio
                        </div>
                        <div
                          *ngIf="
                            contacto_mail.errors != null &&
                            contacto_mail.errors.email
                          "
                        >
                          El email no tiene un formato válido
                        </div>
                      </div>

                      <div class="fila-form contenedor-botones">
                        <button
                          type="submit"
                          [disabled]="!editProfileCompanyForm.valid"
                        >
                          Guardar
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
