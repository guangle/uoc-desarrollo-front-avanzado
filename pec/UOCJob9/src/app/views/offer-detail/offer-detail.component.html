<div class="contenedor">
  <div class="row-header">
    <h1>
      Detalle de la oferta
    </h1>
    <a [routerLink]="['/admin/offers/list']">
      Volver al listdo de ofertas
    </a>
  </div>
  <div class="row-datos">
    <div class="div-detalle">
      <h2>Oferta</h2>
      <div class="campo-detalle">
        <label>Empresa: </label> {{ (currentOffer$ | async).company?.name }}
      </div>
      <div class="campo-detalle">
        <label>Puesto </label> {{ (currentOffer$ | async).job?.name }}
      </div>
      <div class="campo-detalle">
        <label>Descripción </label>
        {{ (currentOffer$ | async).job?.description }}
      </div>
    </div>
    <div class="div-detalle">
      <h2>Localización</h2>
      <div class="campo-detalle">
        <label>Provincia </label> {{ (currentOffer$ | async).province?.name }}
      </div>
      <div class="campo-detalle">
        <label>Municipio </label> {{ (currentOffer$ | async).municipe?.name }}
      </div>
    </div>
    <div class="div-detalle">
      <h2>Destinado a persona de:</h2>
      <div class="campo-detalle">
        <label>Familia profesional </label>
        {{ (currentOffer$ | async).category?.name }}
      </div>
    </div>
    <div class="div-detalle">
      <h2>Títulos</h2>
      <table>
        <thead>
          <tr>
            <th>Id</th>
            <th>Nombre</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let t of (currentOffer$ | async).title">
            <td>
              {{ t.uid }}
            </td>
            <td>
              {{ t.name }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="row-datos">
    <!-- 
    'esperamos' a los observables que nos hacen falta para mostrar el botón con esta notación 
    que he visto en: https://medium.com/@ofirrifo/extract-multiple-observables-with-the-async-pipe-in-angular-b119d22f8e05
  -->
    <div
      *ngIf="{
        currentUser: currentUser$ | async,
        currentOffer: currentOffer$ | async,
        inscrito: inscrito$ | async
      } as data"
      class="contenedor-botones"
    >
      <button
        *ngIf="!data.inscrito"
        (click)="inscribirOferta(data.currentUser, data.currentOffer)"
      >
        Inscribirse a la oferta
      </button>
      <button
        *ngIf="data.inscrito"
        (click)="borrarseOferta(data.currentUser, data.currentOffer)"
      >
        Borrarse de la oferta
      </button>
    </div>
  </div>
</div>
